---
### TODO功能列表

- [] 49 宁夏回族自治区公共资源交易网 图片功能未完成 - wwj
---
### TODO抓取列表

- [X] 0 全国 http://www.ggzy.gov.cn/

- [] 1 全国 http://www.cebpubservice.com/

- [X] 2 北京 http://ggzyfw.beijing.gov.cn
- [X] 3 天津 http://ggzy.zwfwb.tj.gov.cn/       # 网站无法访问
- [X] 4 河北 http://ggzy.hebei.gov.cn/          # 没数据
- [X] 5 山西 http://prec.sxzwfw.gov.cn          # 没有中标公告 

- [] 6 内蒙古 http://ggzyjy.nmg.gov.cn           # 没有表
- [] 7 辽宁 http://www.lnggzy.gov.cn/

- [X] 8 吉林 http://www.jl.gov.cn/ggzy/

- [] 9 吉林 http://www.ggzyzx.jl.gov.cn/

- [X] 10 黑龙江 http://hljggzyjyw.gov.cn        # 网站崩了
- [X] 11 上海 http://www.shggzy.com             # 没有表

- [] 12 上海 http://www.shcpe.cn/jyfw/xxfw/index.html

- [X] 13 江苏 http://jsggzy.jszwfw.gov.cn/
- [X] 14 浙江 http://www.zjpubservice.com
- [X] 15 浙江 http://www.zmctc.com/zjgcjy/jyxx/ (无项目类型)

- [] 16 安徽 http://ggzy.ah.gov.cn/
- [] 17 福建 https://ggzyfw.fujian.gov.cn/

- [X] 18 福建 http://www.fjggzyjy.cn/
- [X] 19 江西 https://www.jxsggzy.cn/web/

- [] 20 江西 http://ncztb.nc.gov.cn/nczbw/
- [] 21 山东 http://ggzyjy.shandong.gov.cn/
- [] 22 山东 http://ggzyjyzx.shandong.gov.cn/
- [] 23 河南 http://hnsggzyfwpt.hndrc.gov.cn/
- [] 24 河南 http://www.hnggzy.com/hnsggzy/
- [] 25 河南 http://slt.henan.gov.cn/bmzl/jsgl/ztbxx/
- [] 26 湖北 http://jycg.hubei.gov.cn/
- [] 27 湖北 http://www.hbggzyfwpt.cn/

- [X] 28 湖南 https://ggzy.hunan.gov.cn/

- [] 29 湖南 https://www.hnsggzy.com/

- [X] 30 广东 http://bs.gdggzy.org.cn/osh-web/

- [] 31 广东 http://www.gzggzy.cn/
- [] 32 广东 http://www.zgazxxw.com/
- [] 33 广西 http://gxggzy.gxzf.gov.cn/
- [] 34 海南 http://zw.hainan.gov.cn/ggzy/
- [] 35 海南 http://www.hainan.gov.cn/hainan/ggzy/list.shtml
- [] 36 海南 https://hng.zbytb.com/
- [] 37 海南 https://www.ccgp-hainan.gov.cn/zhuzhan/
- [] 38 海南 http://www.hncq.cn/

- [X] 39 重庆 https://www.cqggzy.com/

- [] 40 四川 http://ggzyjy.sc.gov.cn/
- [] 41 贵州 http://ggzy.guizhou.gov.cn/
- [] 42 云南 http://ggzy.yn.gov.cn/
- [] 43 云南 https://www.ynggzy.com/
- [] 44 西藏 http://ggzy.xizang.gov.cn:9090/

- [X] 45 陕西 http://www.sxggzyjy.cn/

- [] 46 甘肃 https://ggzyjy.gansu.gov.cn
- [] 47 青海 https://www.qhdzzbfw.gov.cn/
- [] 48 青海 http://www.qhggzyjy.gov.cn/

- [X] 49 宁夏 http://www.nxggzyjy.org/

- [] 50 新疆 http://zwfw.xinjiang.gov.cn/xinjiangggzy/

- [X] 51 兵团 http://ggzy.xjbt.gov.cn/

- [] 52 品茗-嗨招 https://www.hibidding.com/
- [] 53 必联 https://www.ebnew.com/
- [] 54 E共享交易平台 http://ebid.okap.com/
- [] 55 天工招采平台 http://zhaobiao.tgcw.net.cn/cms/index.htm
- [] 56 建投商务网 https://www.jtsww.com/
- [] 57 精彩纵横 http://jczh.jczh100.com/
- [] 58 明信阳光 http://www.51ygcg.com/
- [] 59 鑫智链招标 http://www.njxic.cn/
- [] 60 安阳公共资源交易 http://www.ayggzy.cn/
- [] 61 优质采电子交易 https://www.youzhicai.com/MScene/Mtender
- [] 62 新点平台 https://www.etrading.cn/
- [] 63 广咨E招 https://www.gzebid.cn/
- [] 64 国信创新电子交易平台 http://www.e-bidding.org/
- [] 65 国e平台 https://www.ebidding.com/portal/html/index.html#page=main:announcement
- [] 66 阳光一路 http://www.ahggzyjt.com/
- [] 67 阳光易招 http://www.sunbidding.com/
- [] 68 齐鲁招采网 http://www.qlebid.com/
- [] 69 广东电子招标平台 https://www.bidnews.cn/gdbid/
- [] 70 易招标-招采进宝（全国） http://china.zcjb.com.cn/cms/index.htm
- [] 71 易招标-招采进宝（河北） http://hb.zcjb.com.cn/cms/index.htm
- [] 72 易招标-招采进宝（山西） http://sxty.ebidding.net.cn/cms/index.htm
- [] 73 易招标-招采进宝（山东） http://sd.zcjb.com.cn/cms/index.htm
- [] 74 易招标-招采进宝（安徽） http://ah.zcjb.com.cn/cms/index.htm
- [] 75 易招标-招采进宝（新疆） http://xj.zcjb.com.cn/cms/index.htm
- [] 76 E招冀成 http://www.hebeibidding.com/
- [] 77 招必得 https://www.zhaobide.com/
- [] 78 住宅修缮工程招投标 http://xsjypt.fgj.sh.gov.cn/
- [] 79 信e采 https://www.ahbidding.com/
- [] 80 兖矿招采平台 http://www.ykjtzb.com/
- [] 81 —联易招交易平台 http://www.ebid.sh.cn/
- [] 82 比德电子采购平台 http://www.bdebid.com/
- [] 83 旺采网 https://sx.5ibid.net/
- [] 84 中国铁路上海局集团有限公司物资采购商务平台 http://222.44.91.31/index.jsp
- [] 85 安装信息网 http://m.zgazxxw.com/
- [] 86 中国联通招标网 http://m.zgazxxw.com/da-010001l772-0.html
- [] 87 中国电子招标网 https://www.ztb365.cn/
- [] 88 中国电子招标网-铁路 https://www.ztb365.cn/tlzb/
- [] 89 铁路招标 http://www.tieluzb.com/
- [] 90 上海地铁 http://www.shmetro.com/
- [] 91 广州地铁 http://bid.gzmtr.com/
- [] 92 广州地铁招标投标网站 http://www.gzmtr.com/bid/bizzbgg/
- [] 93 杭州地铁 http://www.hzmetro.com/tender_0.aspx#midc
- [] 94 深圳地铁 https://www.szmc.net/zhaobiaozhaoshang/
- [] 95 北京地铁 http://www.bjmetro.com.cn/ecp/
- [] 96 成都地铁 https://ep.cdmetro.cn:1443/suneps/login.jsp;jsessionid=Vv7-UGSjKF18XSk5V9wUcYEjXwLwhmKYRggEM4JR2MwVh4W35wTj!2090317832
- [] 97 西安地铁 https://www.xianrail.com/#/biddingProcurement
- [] 98 武汉地铁 http://www.whrtyycg.com/#!web/homePage.jsx
- [] 99 沈阳地铁 http://www.symtc.com/contentlist.php?301
- [] 100 青岛地铁 http://www.qd-metro.com/tender/list.php?sid=49
- [] 101 济南地铁 http://www.jngdjt.cn/html/zbtb/
- [] 102 苏州轨道交通 http://www.sz-mtr.com/tender/notice/
- [] 103 合肥地铁 http://www.hfgdjt.com/category/notice/pur_notice/
- [] 104 郑州地铁 https://www.zzmetro.cn/page/id/37.html
- [] 105 石家庄轨交 http://www.sjzmetro.cn/cyportal2.3/template/site00_Tender_Notice@gdb.jsp?a1b2dd=7xaac
- [] 106 绍兴地铁 http://www.sxsmtr.cn/index.php?m=content&c=index&a=lists&catid=16
- [] 107 宁波轨交 http://www.nbmetro.com/tender_report.php
- [] 108 温州轨交 https://www.wzmtr.com/Col/Col109/Index.aspx
- [] 109 福州地铁 http://www.fzmtr.com/html/fzdt/pagenoticelist/1596446278.html
- [] 110 厦门地铁 https://www.xmgdjt.com.cn/Modules/ControlHtml/Bidding.aspx
- [] 111 长沙轨交 http://www.hncsmtr.com/zbtb/index.html
- [] 113 辽宁建设工程信息网 http://www.hncsmtr.com/zbtb/index.html
- [] 114 光咨电子招投标交易平台 https://www.gzebid.cn/
- [] 115 全国招标信息网 https://www.bidnews.cn/zjzd/
- [] 116 湖南招标网 http://www.hnbidding.com/

- [X] 117 河北政府采购网 http://www.ccgp-hebei.gov.cn/
- [X] 118 河南省政府采购网 http://www.ccgp-henan.gov.cn/
- [X] 119 湖北省政府采购网 http://www.ccgp-hubei.gov.cn/
- [X] 120 湖南省政府采购网 http://www.ccgp-hunan.gov.cn/
- [X] 121 山西省政府采购网 http://www.ccgp-shanxi.gov.cn/
- [X] 122 山东省政府采购网 http://www.ccgp-shandong.gov.cn/
- [X] 123 黑龙江政府采购网 http://www.ccgp-heilongj.gov.cn/
- [X] 124 吉林省政府采购网 http://www.ccgp-jilin.gov.cn/
- [X] 125 辽宁省政府采购网 http://www.ccgp-liaoning.gov.cn/   `需要开启9004文件服务的端口`
- [X] 126 海南省政府采购网 https://www.ccgp-hainan.gov.cn/
- [X] 127 内蒙古自治区政府采购网 http://www.ccgp-neimenggu.gov.cn/
- [X] 128 广东政府采购网 https://gdgpo.czt.gd.gov.cn/
- [X] 129 陕西省政府采购网 http://www.ccgp-shaanxi.gov.cn/
- [X] 130 甘肃省政府采购网 http://www.ccgp-gansu.gov.cn/
- [X] 131 青海省政府采购网 http://www.ccgp-qinghai.gov.cn/
- [X] 132 宁夏回族自治区政府采购网 http://www.ccgp-ningxia.gov.cn/
- [X] 133 江西省政府采购网 http://www.ccgp-jiangxi.gov.cn/

- [] 134 新疆政府采购网 http://www.ccgp-xinjiang.gov.cn/ TODO IP封禁频繁，使用了阿里云WEB防火墙

- [X] 135 四川省政府采购网 http://www.ccgp-sichuan.gov.cn/  TODO  chaoge
- [X] 136 江苏省政府采购网 http://www.ccgp-jiangsu.gov.cn/  TODO  chaoge

- [] 137 广西省政府采购网 http://www.ccgp-guangxi.gov.cn/ TODO IP封禁频繁，使用了阿里云WEB防火墙
- [] 138 云南省政府采购网 http://www.ccgp-yunnan.gov.cn
- [] 139 福建省政府采购网 http://www.ccgp-fujian.gov.cn/ TODO 中文验证码无法处理
- [] 140 贵州省政府采购网 http://www.ccgp-guizhou.gov.cn/

- [X] 141 安徽省政府采购网 http://www.ccgp-anhui.gov.cn   TODO  chaoge

- [] 142 西藏自治区政府采购网 http://www.ccgp-xizang.gov.cn/ TODO 网站崩了

- [X] 143 大连市政府采购网 http://www.ccgp-dalian.gov.cn/

- [] 144 深圳市政府采购网 http://zfcg.sz.gov.cn/

- [X] 145 青岛市政府采购网 http://www.ccgp-qingdao.gov.cn/
- [X] 146 兵团政府采购网 http://ccgp-bingtuan.gov.cn/   TODO chaoge

- [] 147 工程电子招标采购平台 http://ebidding.shoukaigufen.com.cn/  TODO zequn

- [X] 148 中国通用招标网 https://www.china-tender.com.cn/
- [X] 149 中招联合招标采购平台 http://www.365trade.com.cn/  TODO chaoge
- [X] 150 冀招标全流程电子交易平台 http://www.jizhaobiao.com TODO chaoge
- [X] 151 中钢招标有限责任公司 https://tendering.sinosteel.com/
- [X] 152 中煤易购 http://www.zmzb.com/

- [] 153 中化商务电子招投标平台 http://e.sinochemitc.com/cms/channel/ywgg1qb/index.htm    TODO zequn
- [] 154 比比网 http://www.bitbid.cn/    TODO zequn

- [X] 155 招标通 http://www.hebztb.com/   TODO zequn
- [X] 156 易交在线 http://www.sxyjcg.com/
- [X] 157 内蒙古宣宇工程电子交易平台 http://www.nmgxuanyu.com/
- [X] 158 河北张家口交易平台 http://hbzjk.86ztb.com/
- [X] 159 惠招标 http://www.hbidding.com/

- [] 160 金蝉电子招标投标综合交易平台 http://www.jcebid.com/   TODO 下周 miaokela
- [] 161 云买卖 http://www.eqbidding.com/   TODO 下周 miaokela
- [] 162 润世和电子招投标交易平台 http://www.rshec.com/
- [] 163 易土365 http://www.etu365.com/
- [] 164 一联易招 http://www.ebid.sh.cn/
- [] 165 高校e采 http://www.ebidding.cn/
- [] 166 招采信息 http://www.anzhaocai.com/
- [] 167 安招采 http://www.anzhaocai.com/
- [] 168 安兆工程技术咨询有限公司电子交易平台 http://www.anzhaobid.com/
- [] 169 海易招 http://www.hyebid.cn/
- [] 170 赢标电子招标采购交易平台 https://www.fzbidding.com/
- [] 171 齐鲁采购与招标网 http://www.qlebid.com/
- [] 172 中原招采网 http://www.zybtp.com/
- [] 173 一毂清风 https://www.hbncp.com.cn/
- [] 174 华杰电子招投标交易平台 http://www.hjztb.com/
- [] 175 一毂清风 https://www.hbncp.com.cn/
- [] 176 东风交易中心 https://www.dongfengtc.com/
- [] 177 易建采 https://www.epc1688.com/
- [] 178 招采猫电子交易平台 https://www.bidcat.cn/
- [] 179 广东省机电设备招标中心 https://www.gdebidding.com/
- [] 180 诚E招电子采购交易平台 https://www.chengezhao.com/
- [] 181 圣诺联合 https://www.okzhaobiao.com

  ```
  TODO 206、福易采文档有问题（与207、海易招重复）
  TODO 211、安招采文档有问题（与204、安招采重复）
  TODO 215、河南豫信文档有问题
  ```

---

###地方

# 北京地区

- [] 1101 北京市海淀区人民政府  http://www.bjhd.gov.cn/
- [] 1102 北京市政府采购网  http://www.ccgp.gov.cn/

# 上海地区

- [] 3101 上海市政府采购网  http://www.ccgp-shanghai.gov.cn/

# 浙江地区

- [] 3301 杭州公共资源交易网  https://www.hzctc.cn/
- [] 3302 浙江政府采购网  https://zfcg.czt.zj.gov.cn/
- [] 3303 浙江省能源集团电子招投标平台  https://www.zeec.cn/
- [] 3304 浙江省水利厅  http://slt.zj.gov.cn/
- [] 3305 宁波公共资源交易网  http://bidding.ningbo.gov.cn/
- [] 3306 嘉兴公共资源交易网  http://jxszwsjb.jiaxing.gov.cn/
- [] 3307 湖州公共资源交易网  http://ggzy.huzhou.gov.cn/
- [] 3308 衢州公共资源交易中心  http://ggzy.qz.gov.cn/    `没有表`
- [] 3309 溫州公共资源交易网  https://ggzyjy.wenzhou.gov.cn/
- [] 3310 台州公共资源交易网  http://tzztb.zjtz.gov.cn/    `没数据`
- [] 3311 丽水公共资源交易中心  http://lssggzy.lishui.gov.cn/    `详情页地址无法访问`
- [] 3312 绍兴公共资源交易网  http://ggb.sx.gov.cn/
- [] 3313 舟山公共资源交易中心  http://zsztb.zhoushan.gov.cn/
- [] 3314 杭州余杭门户网站  http://www.yuhang.gov.cn/
- [] 3315 柯桥区公共资源交易中心  https://www.hibidding.com/
- [] 3316 诸暨公共资源交易网  http://ggb.zhuji.gov.cn/
- [] 3317 浙江招标网  https://zj.bidcenter.com.cn/
- [] 3318 金华市公共资源交易中心  http://ggzyjy.jinhua.gov.cn/cms/  `PIC`
- [] 3319 长兴县公共资源交易中心  http://ggzy.zjcx.goc.cn/cxweb/
- [] 3320 苍南县公共资源交易中心  http://ggzy.cncn.gov.cn/TPFrontNew/
- [] 3321 临海市公共资源交易中心  http://www.linhai.gov.cn/
- [] 3322 安吉公共资源交易中心    http://ggzy.anji.gov.cn/
- [] 3323 萧山政府门户网站  http://www.xiaoshan.gov.cn/
- [] 3324 南浔区公共资源交易中心  http://ggzy.nanxun.gov.cn/
- [] 3325 德清县公共资源交易中心  http://116.62.168.209/zbgg/index.htm   `PIC`
- [] 3326 龙游县公共资源交易中心  http://ztb.longyou.gov.cn/
- [] 3327 平阳县公共资源交易中心  http://www.zjpy.gov.cn/    `网站发生变动，待重新安排`
- [] 3328 常山县公共资源交易网  http://qzcs.zjzwfw.gov.cn/
- [] 3329 拱墅区公共资源交易中心  http://www.gongshu.gov.cn/    `没有表`
- [] 3330 江干区公共资源交易中心  http://www.jianggan.gov.cn/    `没有表`

- [X] 3331 富阳区公共资源交易中心  http://www.fuyang.gov.cn/
- [X] 3332 淳安县公共资源交易中心  http://www.qdh.gov.cn/

- [] 3333 浙江交通运输厅  http://jtyst.zj.gov.cn/    `总共200条数据`

- [X]`3334` 建德市公共资源交易中心  http://www.jiande.gov.cn/
- [X] 3335 温州市鹿城区公共资源交易中心 http://spgg.lucheng.gov.cn/  `PIC`
- [X]`3336` 温州市乐清市公共资源交易中心 http://ggzy.yueqing.gov.cn/
- [X]`3337` 温州市瑞安市公共资源交易中心 http://ggzy.ruian.gov.cn/
- [X] 3338 温州市永嘉县公共资源交易中心 http://ggzy.yj.gov.cn/  `PIC`
- [X] 3339 温州市洞头区公共资源交易中心 http://www.dongtou.gov.cn/  `PIC`
- [X] 3340 温州市文成县公共资源交易中心 http://ggjy.wencheng.gov.cn/  `PIC`
- [X]`3341` 温州市泰顺县公共资源交易中心 http://www.ts.gov.cn/

- [] `3342` 绍兴市上虞区公共资源交易中心 http://xxgk.shangyu.gov.cn/
- [] 3343 绍兴市新昌县公共资源交易中心 http://www.zjxc.gov.cn/
- [] 3344 绍兴市越城区公共资源交易中心 http://www.sxyc.gov.cn/
- [] 3345 绍兴市嵊州市公共资源交易中心 http://www.szzj.gov.cn/
- [] 3346 湖州市吴兴区公共资源交易中心 http://www.wl.gov.cn/
- [] 3347 台州市温岭市公共资源交易中心 http://www.wl.gov.cn/
- [] 3348 台州市三门县公共资源交易中心 http://jyzx.sanmen.gov.cn/   `招标公告就200多条，要跑全量`
- [] 3349 台州市天台县公共资源交易中心 http://www.zjtt.gov.cn/    `没有表`
- [] `3350` 台州市仙居县公共资源交易中心 http://www.zjxj.gov.cn/
- [] 3351 金华市婺城区公共资源交易中心 http://www.wuch.gov.cn/    `PIC`
- [] `3352` 金华市金东区公共资源交易中心 http://www.jindong.gov.cn/   `PIC`
- [] 3353 金华市兰溪市公共资源交易中心 http://www.lanxi.gov.cn/
- [] `3354` 金华市东阳市公共资源交易中心 http://www.dongyang.gov.cn/  `PIC`
- [] 3355 金华市永康市公共资源交易中心 http://www.yk.gov.cn/
- [] `3356` 金华市义乌市公共资源交易中心 http://ggfw.ywjypt.yw.gov.cn/
- [] 3357 衢州市衢江区公共资源交易中心 http://www.qjq.gov.cn/
- [] 3358 衢州市开化县公共资源交易中心 http://www.kaihua.gov.cn/
- [] 3359 衢州市柯城区公共资源交易中心 http://www.qjq.gov.cn/
- [] 3360 金华市武义县人民政府 http://www.zjwy.gov.cn/
- [] `3361` 金华市浦江县人民政府 http://www.pj.gov.cn/
- [] 3362 金华市磐安县人民政府 http://www.panan.gov.cn/

# 清洗地区 集合

地区                             code                     清洗人

> 浙江公告资源交易网
- 宁波                             3305                     刘超
- 嘉兴                             3306                     刘超
- 富阳                             3331                     刘超
- 建德                             3334                     刘超
- 淳安                             3332                     克拉
- 乐清                             3336                     克拉
- 瑞安                             3337                     刘超
- 泰顺                             3341                     克拉
- 上虞                             3342                     克拉
- 仙居                             3350                     刘超
- 义乌                             3356                     克拉
- 武义                             3360                     克拉
- 温岭                             3361                     刘超
- 绍兴                             3312                     刘超
- 温州                             3309                     克拉
- 苍南                             3320                     克拉
- 嵊州                             3345                     刘超
- 磐安                             3362                     刘超
- 长兴                             3319                     克拉
- 吴兴                             3346			                克拉
- 开化                             3358                     克拉
- 安吉                             3322                     缪克拉
- 龙游                             3326                     缪克拉
- 临海                             3321                     刘超
- 余杭                             3314                     刘超
- 舟山                             3313
- 湖州                             3307
- 湖南政府                         120                       克拉
- 河南                             118                       刘超
- 湖北                             119                       刘超(端口未开放)
- 山东                             122                       刘超

> 政府采购网
- 黑龙江政府                       123                        克拉
- 吉林政府                         124                       克拉
- 内蒙古政府                       127                       刘超
- 海南政府                         126                       刘超
- 广东政府                         128                       刘超
- 甘肃政府                         130                       克拉(瑞数加密)
- 青海政府                         131                       克拉
- 宁夏政府                         132                       刘超
- 江西政府                         133                       克拉
- 江苏政府                         136                       刘超 
- 大连政府                         143			                 克拉
- 青岛政府				                 145 			                 克拉
- 兵团政府                         146                       刘超

> 公共资源交易网
- 北京公共资源                      2                         克拉
- 吉林公共资源                      8                         克拉
- 江苏公共资源                      13                        刘超
- 浙江公共资源                      14                        刘超
- 福建公共资源                      18
- 江西公共资源                      19



# 备注  3313  未清洗完成    待清洗

### 反爬策略汇总

> 49 宁夏回族自治区公共资源交易网
>
>> 问题：提取页面数据时，id是页面加载完之后再添加的 `<br>`
>> 解决：提取原始界面分析xpath再提取 `<br>`
>>

> 08 山西省公共资源交易平台
>
>> 问题：信息类型分类时需要POST http://prec.sxzwfw.gov.cn/queryContent-jyxx.jspx
>>

---

### 各站点异常统计

> 53 必联网
>
>> https://www.ebnew.com/businessShow/664346381.html，附件是一个展示链接
>> 不是一个下载链接，当前无解决方案                          ——2021-4-22
>>

> 57 精彩纵横
>
> # 代理机构已解析   后期可以不用清洗
>
> 该网站有两种分类 需要分别使用两种url请求 参数不一样          --2021-5-07

> 3318  浙江金华公共资源交易中心  附件是需要先请求的get_url()方法  获取相应的uid 进行拼接
> --2021-04-28
>
> 3344  绍兴越城  因关键字分类导致分类错误   产品要求不使用关键字分类     --2021-9-01

### install 命令

> C:\Users\PC\AppData\Local\Programs\Python\Python39\python.exe
> C:\Users\PC\AppData\Local\Programs\Python\Python39\Scripts\pip3.9.exe

> pip install --index-url https://pypi.douban.com/simple `<br>`
> pip --default-timeout=1000 install PyQt5==5.10.1 `<br>`
> pip --default-timeout=1000 install -i https://pypi.tuna.tsinghua.edu.cn/simple scrapy `<br>`
> pip --default-timeout=1000 install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt `<br>`

> C:\Users\PC\AppData\Local\Programs\Python\Python39\Scripts\pip3.9.exe --default-timeout=1000 install -i https://pypi.tuna.tsinghua.edu.cn/simple

> C:\Users\PC\AppData\Local\Programs\Python\Python39\Scripts\pip3.9.exe freeze > requirements.txt

### 源码修改

文件：
C:\Users\PC\AppData\Local\Programs\Python\Python39\Lib\site-packages\scrapy\spiders\crawl.py
修改：
第101行（request = self._build_request(rule_index, link)）下面增加一行
request.meta["cb_kwargs"] = rule.cb_kwargs

### 打包上传脚本命令(非虚拟环境，虚拟环境自行修改路径)

前置

> 先安装scrapyd-client `<br>`
> 在该目录下新建scrapyd-deploy.bat 路径如下 `<br>`
> C:\Users\PC\AppData\Local\Programs\Python\Python39\Scripts
> 开始写入 `<br>`
> @echo off `<br>`
> "C:\Users\PC\AppData\Local\Programs\Python\Python39\python.exe" "C:\Users\PC\AppData\Local\Programs\Python\Python39\Scripts\scrapyd-deploy" %*`<br>`
> 写入结束 `<br>`

命令(暂行，后面改成可视化操作)

> 打包上传spiders `<br>`
> scrapyd-deploy data-server -p spider_pro `<br>`

=======

### 代码上传至服务器

# scrapyd_timing

scp  D:\ztx_clone\ztx_spider\scrapyd_timing.py root@192.168.1.248:/home/python/scripts/scrapyd_timing.py

# scrapyd_timing_post

scp  D:\ztx_clone\ztx_spider\scrapyd_timing_post.py root@192.168.1.248:/home/python/scripts/scrapyd_timing_post.py

# scrapyd_clean_data

scp  D:\ztx_clone\ztx_spider\scrapyd_clean_data.py root@192.168.1.248:/home/python/scripts/scrapyd_clean_data.py

# 容器部署

* MySQL
  版本：5.7
  配置文件：

  ```
  [mysql]
  default-character-set=utf8
  [mysqld]
  skip-grant-tables 
  datadir=/var/lib/mysql
  socket=/var/lib/mysql/mysql.sock
  user=mysql
  # Disabling symbolic-links is recommended to prevent assorted security risks
  symbolic-links=0
  character-set-server=utf8
  default-storage-engine=INNODB
  [mysqld_safe]
  log-error=/var/log/mysqld.log
  pid-file=/var/run/mysqld/mysqld.pid
  ```
* redislabs
* scrapyd

  - requirements.txt
    ```
    attrs==21.2.0
    Automat==20.2.0
    beautifulsoup4==4.9.3
    certifi==2020.12.5
    cffi==1.14.5
    chardet==3.0.4
    constantly==15.1.0
    cryptography==3.4.7
    cssselect==1.1.0
    DBUtils==2.0.1
    et-xmlfile==1.1.0
    gevent==21.1.2
    greenlet==1.1.0
    hiredis==2.0.0
    html-table-extractor==1.4.1
    hyperlink==21.0.0
    idna==2.5
    incremental==21.3.0
    itemadapter==0.2.0
    itemloaders==1.0.4
    jmespath==0.10.0
    lxml==4.6.3
    numpy==1.20.2
    openpyxl==3.0.7
    pandas==1.2.3
    parsel==1.6.0
    Protego==0.1.16
    pyasn1==0.4.8
    pyasn1-modules==0.2.8
    pycparser==2.20
    pycryptodome==3.10.1
    PyDispatcher==2.0.5
    PyMySQL==1.0.2
    pyOpenSSL==20.0.1
    python-dateutil==2.8.1
    pytz==2021.1
    PyYAML==5.4.1
    queuelib==1.6.1
    redis==3.5.3
    redisbloom==0.4.0
    requests==2.25.1
    rmtest==0.7.0
    Scrapy==2.4.1
    scrapy-redis==0.7.1
    scrapy-splash==0.7.2
    scrapyd==1.2.1
    scrapyd-client==1.1.0
    service-identity==21.1.0
    six==1.16.0
    soupsieve==2.2.1
    SQLAlchemy==1.4.0
    Twisted==21.2.0
    urllib3==1.21.1
    w3lib==1.22.0
    xlwt==1.3.0
    xmltodict==0.12.0
    zope.event==4.5.0
    zope.interface==5.4.0
    ```
  - Dockerfile
    ```
    FROM python:3.9
    #add the scrapyd configure file

    # set timezone
    RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
    RUN echo 'Asia/Shanghai' >/etc/timezone

    ADD ./conf/scrapyd.conf /etc/scrapyd/scrapyd.conf
    #add requirements.txt
    ADD requirements.txt /opt/requirements.txt
    WORKDIR /opt
    #use other fast image
    RUN pip3 install  -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

    CMD ["scrapyd"]

    EXPOSE 6800
    ```
* 创建容器

  ```
  docker run -p 8050:3306 --name ztx_mysql \
  -v $PWD/MYSQL/conf.d:/etc/mysql/conf.d \
  -v $PWD/MYSQL/logs:/logs \
  -v $PWD/MYSQL/data:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD=Ly3sa%@D0$pJt0y6 \
  -d mysql:5.7
  ```

  ```
  docker run -p 8090:6379 --restart=always --name ztx_redis
  -d redislabs/rebloom:latest

  docker run -d -p 8060:6801 scrapyd
  ```

# Splash动态js加载服务

```txt
docker pull scrapinghub/splash
docker run -p 4300:8050 --name ztx_splash -d scrapinghub/splash

```

> 调用方式: yield SplashRequest(url=href, callback=self.parse_detail, args={'wait': '0.5'})

# 关键字过滤条件

```

采集的规则做一些调整：
关键词筛选优先级
【预审关键词（新增：预审）】
大于【变更关键词】
大于【异常关键词】
大于【预告关键词】
大于【中标关键词（新增：中标公告、结果公告、成交公告）】
大于【招标关键词】
大于【其他关键词】

```

```

```
